<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bento Notes Formatter</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower:wght@400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 40px);
        }

        .input-section {
            display: grid;
            grid-template-rows: auto 1fr auto;
            gap: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .input-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .input-card textarea {
            width: 100%;
            height: 100%;
            min-height: 300px;
            border: none;
            outline: none;
            resize: none;
            font-family: 'Indie Flower', cursive;
            font-size: 16px;
            line-height: 1.6;
            background: transparent;
            color: #374151;
        }

        .input-card textarea::placeholder {
            color: #9ca3af;
            font-style: italic;
        }

        .controls {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .theme-selector h3 {
            margin-bottom: 15px;
            color: #374151;
            font-weight: 600;
        }

        .theme-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }

        .theme-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .theme-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s ease;
        }

        .theme-btn:hover::before {
            left: 0;
        }

        .theme-btn.red {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        }

        .theme-btn.blue {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
        }

        .theme-btn.green {
            background: linear-gradient(135deg, #a8e6cf, #81c784);
        }

        .theme-btn.yellow {
            background: linear-gradient(135deg, #ffd93d, #ffb74d);
        }

        .theme-btn.active {
            transform: scale(0.95);
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .proceed-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .proceed-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s ease;
        }

        .proceed-btn:hover::before {
            left: 0;
        }

        .proceed-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(102, 126, 234, 0.3);
        }

        .preview-section {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .preview-content {
            font-family: 'Indie Flower', cursive;
            font-size: 18px;
            line-height: 1.8;
            color: #374151;
            min-height: 100%;
        }

        .note-box {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .note-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .note-box h3 {
            font-weight: 700;
            margin: 0 0 15px 0;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 20px;
        }

        .note-box p {
            margin-bottom: 12px;
            padding: 4px 0;
            line-height: 1.6;
        }

        .note-box:last-child {
            margin-bottom: 0;
        }

        /* Theme styles for boxes */
        .theme-red .note-box {
            background: linear-gradient(135deg, rgba(255, 224, 224, 0.6), rgba(255, 179, 179, 0.4));
            border: 1px solid rgba(229, 62, 62, 0.2);
        }
        
        .theme-red .note-box h3 {
            background: linear-gradient(135deg, #ffe0e0, #ffb3b3);
            color: #c53030;
            border-left: 4px solid #e53e3e;
        }

        .theme-blue .note-box {
            background: linear-gradient(135deg, rgba(224, 242, 255, 0.6), rgba(179, 218, 255, 0.4));
            border: 1px solid rgba(49, 130, 206, 0.2);
        }
        
        .theme-blue .note-box h3 {
            background: linear-gradient(135deg, #e0f2ff, #b3daff);
            color: #2b6cb0;
            border-left: 4px solid #3182ce;
        }

        .theme-green .note-box {
            background: linear-gradient(135deg, rgba(224, 255, 224, 0.6), rgba(179, 255, 179, 0.4));
            border: 1px solid rgba(56, 161, 105, 0.2);
        }
        
        .theme-green .note-box h3 {
            background: linear-gradient(135deg, #e0ffe0, #b3ffb3);
            color: #2f855a;
            border-left: 4px solid #38a169;
        }

        .theme-yellow .note-box {
            background: linear-gradient(135deg, rgba(255, 244, 224, 0.6), rgba(255, 232, 179, 0.4));
            border: 1px solid rgba(214, 158, 46, 0.2);
        }
        
        .theme-yellow .note-box h3 {
            background: linear-gradient(135deg, #fff4e0, #ffe8b3);
            color: #b7791f;
            border-left: 4px solid #d69e2e;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
                gap: 15px;
            }
            
            .theme-buttons {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-section">
            <div class="header">
                <h1>üìù Bento Notes</h1>
                <p>Transform your text into beautiful, styled notes</p>
            </div>
            
            <div class="input-card">
                <textarea 
                    id="textInput" 
                    placeholder="Enter your text here...

Use **text** for headings
Write 'xxxx' to create new boxes
Regular text will be formatted as body text

Example:
**Electromagnetic Induction**

Magnetic flux through any surface, held perpendicular to the field lines, is called magnetic flux which is denoted by Œ¶B.

xxxx

**Faraday's Law**

When the loop is closed, induced e.m.f. drives current in either a clockwise or anticlockwise direction.

xxxx

**Lenz's Law**

The direction of induced current is such that it opposes the change in magnetic flux."
                ></textarea>
            </div>
            
            <div class="controls">
                <div class="theme-selector">
                    <h3>Choose Color Theme:</h3>
                    <div class="theme-buttons">
                        <button class="theme-btn red active" onclick="selectTheme('red')">üî¥ Red Theme</button>
                        <button class="theme-btn blue" onclick="selectTheme('blue')">üîµ Blue Theme</button>
                        <button class="theme-btn green" onclick="selectTheme('green')">üü¢ Green Theme</button>
                        <button class="theme-btn yellow" onclick="selectTheme('yellow')">üü° Yellow Theme</button>
                    </div>
                </div>
                <button class="proceed-btn" onclick="generatePDF()">üìÑ Save as PDF</button>
            </div>
        </div>
        
        <div class="preview-section theme-red" id="preview">
            <div class="preview-content" id="previewContent">
                <h2>‚ú® Preview</h2>
                <p>Your formatted notes will appear here as you type...</p>
                <p>Use **text** to create headings with beautiful styling!</p>
            </div>
        </div>
    </div>

    <script>
        let currentTheme = 'red';
        
        function selectTheme(theme) {
            currentTheme = theme;
            
            // Update active button
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.theme-btn.${theme}`).classList.add('active');
            
            // Update preview theme
            const preview = document.getElementById('preview');
            preview.className = `preview-section theme-${theme}`;
            
            // Refresh preview
            updatePreview();
        }
        
        function formatText(text) {
            if (!text.trim()) {
                return `
                    <div class="note-box">
                        <h3>‚ú® Preview</h3>
                        <p>Your formatted notes will appear here as you type...</p>
                        <p>Use **text** to create headings and write "xxxx" to create new boxes!</p>
                    </div>
                `;
            }
            
            // Split text by "xxxx" (case insensitive) to create separate boxes
            const boxes = text.split(/xxxx/gi);
            let formattedHTML = '';
            
            // Process each box
            for (let i = 0; i < boxes.length; i++) {
                const boxContent = boxes[i].trim();
                
                // Skip completely empty boxes
                if (boxContent === '') continue;
                
                formattedHTML += '<div class="note-box">';
                
                // Split box content into lines and process each line
                const lines = boxContent.split('\n');
                let hasContent = false;
                
                for (let line of lines) {
                    const trimmedLine = line.trim();
                    
                    // Skip empty lines
                    if (trimmedLine === '') continue;
                    
                    // Check for heading format **text**
                    const headingMatch = trimmedLine.match(/^\*\*(.*?)\*\*$/);
                    if (headingMatch && headingMatch[1].trim()) {
                        formattedHTML += `<h3>${headingMatch[1].trim()}</h3>`;
                        hasContent = true;
                    } else {
                        // Regular paragraph text
                        formattedHTML += `<p>${trimmedLine}</p>`;
                        hasContent = true;
                    }
                }
                
                // If box has no content, add placeholder
                if (!hasContent) {
                    formattedHTML += '<p>Empty box</p>';
                }
                
                formattedHTML += '</div>';
            }
            
            // If no content was generated, show default
            if (!formattedHTML) {
                formattedHTML = '<div class="note-box"><p>Start typing to see your notes...</p></div>';
            }
            
            return formattedHTML;
        }
        
        function updatePreview() {
            const input = document.getElementById('textInput').value;
            const preview = document.getElementById('previewContent');
            preview.innerHTML = formatText(input);
        }
        
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const input = document.getElementById('textInput').value;
            if (!input.trim()) {
                alert('Please enter some text to generate PDF');
                return;
            }
            
            // Set theme colors
            const themeColors = {
                red: { heading: [197, 48, 48], bg: [255, 224, 224] },
                blue: { heading: [43, 108, 176], bg: [224, 242, 255] },
                green: { heading: [47, 133, 90], bg: [224, 255, 224] },
                yellow: { heading: [183, 121, 31], bg: [255, 244, 224] }
            };
            
            const colors = themeColors[currentTheme];
            
            // Set up document
            doc.setFont('helvetica');
            let yPosition = 30;
            const pageWidth = doc.internal.pageSize.width;
            const margin = 20;
            const maxWidth = pageWidth - (margin * 2);
            
            // Process text
            const lines = input.split('\n');
            
            for (let line of lines) {
                line = line.trim();
                
                if (line === '') {
                    yPosition += 8;
                    continue;
                }
                
                // Check for heading
                const headingMatch = line.match(/^\*\*(.*?)\*\*$/);
                if (headingMatch) {
                    // Add background rectangle for heading
                    doc.setFillColor(colors.bg[0], colors.bg[1], colors.bg[2]);
                    doc.rect(margin - 5, yPosition - 12, maxWidth + 10, 20, 'F');
                    
                    // Add heading text
                    doc.setTextColor(colors.heading[0], colors.heading[1], colors.heading[2]);
                    doc.setFontSize(16);
                    doc.setFont('helvetica', 'bold');
                    doc.text(headingMatch[1], margin, yPosition);
                    yPosition += 25;
                } else {
                    // Regular text
                    doc.setTextColor(55, 65, 81);
                    doc.setFontSize(12);
                    doc.setFont('helvetica', 'normal');
                    
                    // Handle text wrapping
                    const textLines = doc.splitTextToSize(line, maxWidth);
                    for (let textLine of textLines) {
                        if (yPosition > 270) {
                            doc.addPage();
                            yPosition = 30;
                        }
                        doc.text(textLine, margin, yPosition);
                        yPosition += 8;
                    }
                    yPosition += 5;
                }
                
                // Check if we need a new page
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = 30;
                }
            }
            
            // Save the PDF
            doc.save('bento-notes.pdf');
        }
        
        // Add event listener for real-time preview
        document.getElementById('textInput').addEventListener('input', updatePreview);
        
        // Initialize preview
        updatePreview();
    </script>
</body>
    </html>
